(()=>{"use strict";class e{constructor(e,a){this.suit=e,this.rank=a}}class a{constructor(){this.cards=[]}createDeck(){const a=["C","D","H","S"],s=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];for(let r=0;r<a.length;r++)for(let t=0;t<s.length;t++)this.cards.push(new e(a[r],s[t]))}deal(){return this.cards.splice(Math.floor(Math.random()*this.cards.length),1)[0]}}class s{constructor(e){this.playerName=e,this.playerCards=[]}addCard(e){this.playerCards.push(e)}calcTotal(){let e=0,a=!1;for(let s=0;s<this.playerCards.length;s++){let r=this.playerCards[s];"A"===r.rank?a=!0:"J"===r.rank||"Q"===r.rank||"K"===r.rank?e+=10:e+=Number(r.rank)}return a&&(e+=e+11<=21?11:1),e}}class r{constructor(){this.players=[],this.deck=[]}start(e,r,t){const n=new s(e),d=new s(r);this.players.push(n),this.players.push(d);let l=new a;l.createDeck(),this.deck=l;for(let e=0;e<t;e++)n.addCard(l.deal()),d.addCard(l.deal());this.players.forEach((e=>{this.renderInitialHands(e)})),console.log("start:\n",n,d),console.log("remaining cards: ",l)}suitIcon(e){let a;switch(e){case"H":a="&#9829;";break;case"D":a="&#9830;";break;case"S":a="&#9824;";break;case"C":a="&#9827;"}return a}renderInitialHands(e){const a=document.querySelector(".dealerHand"),s=document.querySelector(".playerHand");let r=e.playerCards,t=e.playerName;""==!s.innerHTML&&""==!a.innerHTML&&(s.innerHTML="",a.innerHTML="");for(let e=0;e<r.length;e++){const n=document.createElement("div");n.classList.add("cardHolder");let d=r[e].suit,l=r[e].rank;n.appendChild(this.renderCard(d,l)),"Dealer"===t?a.appendChild(n):s.appendChild(n)}}newCard(e){const a=document.createElement("div"),s=document.querySelector(".dealerHand"),r=document.querySelector(".playerHand"),t=e.playerName,n=this.deck.deal(),d=n.suit,l=n.rank;a.classList.add("cardHolder"),e.addCard(n),a.appendChild(this.renderCard(d,l)),"Dealer"===t?s.appendChild(a):r.appendChild(a)}renderCard(e,a){const s=document.createElement("div"),r=document.createElement("div");if(s.classList.add("card","in_animation",e,a),"A"===a||"K"===a||"Q"===a||"J"===a)s.innerHTML=`<div class="card-value-suit top"> <span>${a}</span> <span>${this.suitIcon(e)}</span></div>\n                        <div class="card-suit ${a}"> ${a} </div>\n                        <div class="card-value-suit bot"><span>${a}</span> <span>${this.suitIcon(e)}</span></div>`;else{r.classList.add("card-suit",a),s.innerHTML=`<div class="card-value-suit top"> <span>${a}</span> <span>${this.suitIcon(e)}</span></div>`;for(let s=0;s<Number(a);s++)r.innerHTML+=`<span>${this.suitIcon(e)}</span>`;s.appendChild(r),s.innerHTML+=`<div class="card-value-suit bot"> <span>${a}</span> <span>${this.suitIcon(e)}</span></div>`}return s}}!function(){const e=document.querySelector(".deal"),a=document.querySelector(".hit"),s=document.querySelector(".stay"),t=document.querySelector(".gameArea"),n=document.querySelector(".playerArea"),d=(document.querySelector(".dealerArea"),document.createElement("p")),l=document.querySelector(".dealerHand"),c=document.querySelector(".playerHand");let i,o,u,p,h;t.classList.remove("gameArea"),t.classList.add("hiddenArea"),d.classList.add("scoreArea"),n.appendChild(d),e.addEventListener("click",(()=>{a.disabled=!1,a.classList.remove("greyOut"),s.classList.remove("winButton"),s.classList.remove("greyOut"),c.innerHTML="",l.innerHTML="",t.classList.remove("hiddenArea"),t.classList.add("gameArea"),i=new r,i.start("Player","Dealer",2),o=i.players[0],u=i.players[1],p=o.calcTotal(),h=u.calcTotal(),console.log(o.playerName+" hand score: "+p),console.log(u.playerName+" hand score: "+h),21===p&&h<21?(d.innerHTML="Natural 21!",a.disabled=!0,a.classList.add("greyOut"),s.classList.add("winButton")):d.innerHTML=`Your current score: ${p}`})),a.addEventListener("click",(()=>{i.newCard(o),p=o.calcTotal(),21===p?(d.innerHTML="Blackjack 21!",a.disabled=!0,a.classList.add("greyOut"),s.classList.add("winButton")):p>21?(d.innerHTML=`${p} You bust! Deal again.`,a.disabled=!0,a.classList.add("greyOut"),s.classList.add("greyOut")):d.innerHTML=`Your current score: ${p}`}))}()})();